(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{79018:function(e,t,r){Promise.resolve().then(r.bind(r,79106))},79106:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var a=r(57437),s=r(2265),n=r(79820),i=r(12381),l=r(40279),o=r(92369),c=r(82222),d=r(30401),u=r(71769),f=r(81706),m=r(91723),x=r(77945),p=r(70112),h=r(82023),g=r(18930),b=r(44743),v=r(21840),y=r(48614),j=r(14438);let N=e=>{let{icon:t,label:r,onClick:s,disabled:n}=e;return(0,a.jsxs)(i.z,{variant:"ghost",size:"sm",className:"flex items-center gap-1.5 text-muted-foreground hover:text-primary",onClick:s,disabled:n,children:[(0,a.jsx)(t,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:r})]})},w=()=>(0,a.jsx)(v.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center gap-1.5 h-10",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(v.E.div,{className:"w-1.5 bg-primary/80 rounded-full",animate:{scaleY:[1,1.5,1,.5,1],height:["16px","32px","16px","8px","16px"]},transition:{duration:1.2,repeat:1/0,ease:"easeInOut",delay:.15*t}},t))});function k(){let[e,t]=(0,s.useState)([]),[r,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(!1),[E,I]=(0,s.useState)(!1),[Z,A]=(0,s.useState)(1),[_,O]=(0,s.useState)(!1),z=(0,s.useRef)(null),R=window.speechSynthesis,T="sonilearn-ai-mentor-chat";(0,s.useEffect)(()=>{O(!0);try{let e=localStorage.getItem(T);if(e)t(JSON.parse(e));else{let e={id:"ai-".concat(Date.now()),sender:"ai",text:"Hello! I am your AI English Mentor. How can I help you improve your English today? You can ask me questions, practice conversation, or ask for writing feedback."};t([e])}}catch(e){console.error("Failed to parse chat from localStorage",e),t([{id:"ai-".concat(Date.now()),sender:"ai",text:"Hello! I am your AI English Mentor. How can I help you improve your English today? You can ask me questions, practice conversation, or ask for writing feedback."}])}},[]),(0,s.useEffect)(()=>{_&&e.length>0&&localStorage.setItem(T,JSON.stringify(e))},[e,_]);let D=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!R||!e)return;R.speaking&&R.cancel();let r=new SpeechSynthesisUtterance(e);r.rate=t,r.onstart=()=>I(!0),r.onend=()=>I(!1),r.onerror=()=>I(!1),R.speak(r)},[R]);(0,s.useEffect)(()=>{var e;null===(e=z.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]),(0,s.useEffect)(()=>()=>{R&&R.speaking&&R.cancel()},[R]);let Y=async e=>{if(e.preventDefault(),!r.trim()||S)return;let a={id:"user-".concat(Date.now()),sender:"user",text:r};t(e=>[...e,a]),k(""),C(!0);try{let e=await fetch("/api/ai-mentor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userInput:r})});if(!e.ok)throw Error("AI mentor API request failed");let a=await e.json(),s={id:"ai-".concat(Date.now()),sender:"ai",text:a.message,correction:a.correction,vocab_tip:a.vocab_tip};t(e=>[...e,s]),D(a.message,Z)}catch(e){j.Am.error("The AI mentor is taking a break. Please try again in a moment."),console.error(e)}finally{C(!1)}},H=e=>{j.Am.info("".concat(e," feature coming soon!"))},P=()=>{let e=1===Z?.5:1;A(e),j.Am.info("Speech rate set to ".concat(1===e?"normal":"slow","."))};return _?(0,a.jsxs)("div",{className:"flex flex-col h-full max-h-[calc(100vh-6rem)]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(h.Z,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"AI English Mentor"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Your personal AI study partner, powered by Gemini 1.5 Pro."})]})]}),(0,a.jsxs)(i.z,{variant:"destructive",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this conversation? This cannot be undone.")&&(t([{id:"ai-".concat(Date.now()),sender:"ai",text:"Hello! Let's start a new conversation. How can I assist you with your English practice today?"}]),localStorage.removeItem(T),j.Am.success("Chat history cleared."))},disabled:e.length<=1,children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Clear Chat"]})]}),(0,a.jsxs)(n.Zb,{className:"flex-1 flex flex-col glass card-3d overflow-hidden",children:[(0,a.jsxs)(n.aY,{className:"flex-1 p-6 space-y-6 overflow-y-auto",children:[(0,a.jsx)(y.M,{children:e.map((e,t)=>{let r="user"===e.sender,s=r?o.Z:c.Z;return(0,a.jsxs)(v.E.div,{initial:{opacity:0,x:r?50:-50},animate:{opacity:1,x:0},className:"flex ".concat(r?"justify-end":"justify-start"," gap-3 items-start"),children:[!r&&(0,a.jsx)(v.E.div,{animate:{scale:E?1.1:1},transition:{duration:.2},children:(0,a.jsx)(s,{className:"h-8 w-8 p-1.5 rounded-full bg-foreground/10 text-foreground flex-shrink-0"})}),(0,a.jsxs)("div",{className:"space-y-3 max-w-lg w-full",children:[(0,a.jsx)("div",{className:"p-4 rounded-xl glass ".concat(r?"bg-primary text-primary-foreground":""),children:e.text}),!r&&(0,a.jsxs)(a.Fragment,{children:[(e.correction||e.vocab_tip)&&(0,a.jsxs)("div",{className:"border-t pt-3 mt-3 space-y-3",children:[e.correction&&(0,a.jsxs)(n.Zb,{className:"bg-green-500/5 border-green-500/20 glass",children:[(0,a.jsx)(n.Ol,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-green-700"}),(0,a.jsx)(n.ll,{className:"text-sm font-semibold text-green-800",children:"Grammar Correction"})]})}),(0,a.jsx)(n.aY,{className:"p-3 pt-0 text-sm text-green-900",children:(0,a.jsx)("p",{children:e.correction})})]}),e.vocab_tip&&(0,a.jsxs)(n.Zb,{className:"bg-blue-500/5 border-blue-500/20 glass",children:[(0,a.jsx)(n.Ol,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-blue-700"}),(0,a.jsx)(n.ll,{className:"text-sm font-semibold text-blue-800",children:"Vocabulary Tip"})]})}),(0,a.jsx)(n.aY,{className:"p-3 pt-0 text-sm text-blue-900",children:(0,a.jsx)("p",{children:e.vocab_tip})})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 border-t pt-2 flex-wrap",children:[(0,a.jsx)(N,{icon:f.Z,label:"Speak",onClick:()=>D(e.text,Z),disabled:!R||E}),(0,a.jsx)(N,{icon:m.Z,label:1===Z?"Slow Down":"Normal Speed",onClick:P,disabled:!R}),(0,a.jsx)(N,{icon:x.Z,label:"Translate",onClick:()=>H("Translate")}),(0,a.jsx)(N,{icon:p.Z,label:"Explain",onClick:()=>H("Explain Grammar")})]})]})]}),r&&(0,a.jsx)(s,{className:"h-8 w-8 p-1.5 rounded-full bg-primary/10 text-primary flex-shrink-0"})]},e.id)})}),S&&(0,a.jsxs)(v.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start gap-3 items-start",children:[(0,a.jsx)(c.Z,{className:"h-8 w-8 p-1.5 rounded-full bg-foreground/10 text-foreground flex-shrink-0"}),(0,a.jsx)("div",{className:"p-4 rounded-xl glass w-full max-w-lg",children:(0,a.jsx)(w,{})})]}),(0,a.jsx)("div",{ref:z})]}),(0,a.jsx)("div",{className:"p-4 border-t bg-card/50",children:(0,a.jsxs)("form",{onSubmit:Y,className:"flex gap-2",children:[(0,a.jsx)(l.I,{value:r,onChange:e=>k(e.target.value),placeholder:"Type your message here...",disabled:S,className:"flex-1"}),(0,a.jsx)(i.z,{type:"submit",disabled:S||!r.trim(),size:"icon",className:"rounded-full flex-shrink-0",children:(0,a.jsx)(b.Z,{className:"h-5 w-5"})})]})})]})]}):null}},12381:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(57437),s=r(2265),n=r(37053),i=r(90535),l=r(93448);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-semibold ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md hover:shadow-lg",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var a=r(57437),s=r(2265),n=r(93448);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(57437),s=r(2265),n=r(93448);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-14 w-full rounded-full border border-input bg-input px-6 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground/80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[569,438,87,971,117,744],function(){return e(e.s=79018)}),_N_E=e.O()}]);